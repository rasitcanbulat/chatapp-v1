<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>ChatApp - Anasayfa</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>
</head>
<body onload="loadHome()">
    
  <!-- ğŸ”µ Navbar -->
  <div class="navbar">
    <img src="/static/logo.png" alt="Logo" class="logo">
    <span id="current-user" class="username"></span>
  </div>

  <!-- ğŸŸ© Ana BÃ¶lÃ¼m -->
  <div class="main-container">

    <!-- ğŸ”¹ Sol Panel -->
    <div class="left-panel" id="user-list">
      <div class="left-panel-header">
        <h3>Aktif KullanÄ±cÄ±lar</h3> 
      </div>
    </div>

    <!-- ğŸŸ¨ Orta Panel -->
    <div class="center-panel">
      <div class="chat-window" id="chat-window">
        <p>Bir kullanÄ±cÄ± seÃ§erek Ã¶zel sohbete baÅŸlayÄ±n.</p>
      </div>
      <div class="message-input">
        <input type="text" id="message-input-field" placeholder="Mesaj yaz...">
        <button onclick="sendMessage()">GÃ¶nder</button>
      </div>
      <div class="group-list" id="group-list">
        <h4>GruplarÄ±n</h4>
      </div>
    </div>

    <!-- ğŸ”¸ SaÄŸ Panel -->
    <div class="right-panel-box">
      <div class="user-info">
        <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
      </div>
      <button onclick="openCallHistoryModal()" class="call-history-button">ğŸ“ Ã‡aÄŸrÄ± GeÃ§miÅŸi</button>
      <div class="poster-area">
        <img src="{{ url_for('static', filename='poster.png') }}" alt="Poster" class="poster-img">
      </div>
    </div>
  </div> 

  <!-- ğŸ§© Grup OluÅŸturma ModalÄ± -->
  <div id="createGroupModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="closeCreateGroupModal()">&times;</span>
      <h2>Yeni Grup OluÅŸtur</h2>
      <input type="text" id="new-group-name" placeholder="Grup AdÄ±">
      <h4>KullanÄ±cÄ±larÄ± SeÃ§</h4>
      <div id="user-checkboxes" style="text-align: left; max-height: 200px; overflow-y: auto; margin-top: 10px; border: 1px solid #ccc; padding: 10px; border-radius: 6px;"></div>
      <button onclick="createGroup()">OluÅŸtur</button>
    </div>
  </div>

  <!-- ğŸ™ï¸ Sesli Arama ArayÃ¼zÃ¼ -->
  <div id="voice-call-container" class="voice-call-container">
    <h4 id="call-status"></h4>
    <audio id="local-audio" autoplay muted></audio>
    <audio id="remote-audio" autoplay></audio>
    <div class="call-buttons">
      <button id="call-accept-button" style="display:none;">Kabul Et</button>
      <button id="call-reject-button" style="display:none;">Reddet</button>
      <button id="hangup-call-button" style="display:none;">AramayÄ± Kapat</button>
    </div>
  </div>

  <!-- ğŸ“ Ã‡aÄŸrÄ± GeÃ§miÅŸi MODAL -->
<div id="callHistoryModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closeCallHistoryModal()">&times;</span>
    <h2>Ã‡aÄŸrÄ± GeÃ§miÅŸi</h2>
    <ul id="call-history-list" class="call-history-list"></ul>
  </div>
</div>
<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
